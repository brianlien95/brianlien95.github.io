---
title: CSP（內容安全策略）、SOP（同源策略）和CORS（跨源資源共享）
date: 2024-08-04 16:30:25
tags: 網路漏洞
categories: 安全達人養成計劃研習
---
#### 1. CSP（內容安全策略）
- 定義：CSP允許應用程序定義允許加載的內容來源，例如JavaScript、HTML框架和小程序。
- 作用：防止跨站腳本攻擊、點擊劫持和其他內容注入。
- 指令示例：
	- script-src：定義可以執行的腳本。
	- form-action：列出表單提交的有效端點。
	- child-src：定義嵌入框架允許的內容。
	- object-src：限制Flash和其他插件的加載來源。
#### 2. SOP（同源策略）
- 定義：SOP是一個安全機制，用於隔離不同來源的資源。
- 工作原則：腳本在一個網站上執行時不能訪問另一個網站上的某些資源，例如Cookie。
- 同源定義：協議、主機、端口的組合。
#### 3. CORS（跨源資源共享）
- 定義：CORS是一個允許通過特定的HTTP頭來覆蓋SOP的機制，使得資源（如API）可以跨域訪問。
- 請求頭：客戶端在調用服務器時自動設置。
- 響應頭示例：
	- Access-Control-Allow-Origin：指定可以訪問資源的URL。
	- Access-Control-Allow-Methods：指定訪問資源時允許的方法。
#### 4. 安全漏洞的原因
- CORS配置不當：例如，使用通配符*設置Access-Control-Allow-Origin，允許所有外部來源。
- CSP配置不當：例如，未正確設置child-src，允許加載惡意iframe。
#### 5. 安全漏洞的影響
- 私有API或應用程序資源可能暴露給所有外部來源，導致信息洩露或收入損失。
- 內容注入可能導致跨站腳本攻擊或其他惡意內容注入。
#### 6. 預防措施
- CSP：
	- 確定哪些資源應該能夠運行。
	- 為每個頁面明確指定資源。
	- 設置default-src。
	- 避免配置過於寬泛，不要使用通配符允許公共訪問。
- CORS：
	- 正確配置CORS頭，避免使用通配符，確保只有授權的來源可以訪問資源。
#### 7. 結論
- 通過正確配置CSP和CORS，可以顯著提高應用程序的安全性，防止多種網絡攻擊。