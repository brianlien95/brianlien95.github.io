---
title: 對憑證的保護不足
date: 2024-08-03 02:28:16
tags: 密碼學
categories: 安全達人養成計劃研習
---

硬編碼秘密是一種常見的安全漏洞，可能會暴露關鍵信息並損害系統完整性。適當的秘密管理對於維持安全的開發和運營環境至關重要。

### 秘密定義

秘密是任何允許用戶或系統進行身份驗證或授權的東西，例如密碼、API密鑰、加密金鑰、私鑰（SSH、TLS、GPG）等。

### 硬編碼風險

- 硬編碼秘密是指直接將秘密以明文或易於恢復的格式（如Base64編碼）嵌入到源代碼或編譯二進制文件中。
- 即使在編譯過程中插入秘密，如果二進制文件洩漏，也可能導致秘密暴露，因為二進制文件可以被逆向工程。
- 硬編碼秘密可能會意外保存在版本控制系統（如Git）中，即使從代碼庫中移除，它們可能仍然存在於代碼的版本歷史中。

### 常見陷阱

- **開發環境中的硬編碼**：即使在開發環境中，也應避免硬編碼憑據，這不僅設置了風險安全的先例，還可能使測試變得複雜。
- **秘密分散管理**：秘密分散在容器文件、雲系統、配置文件、管道甚至直接在代碼中，缺乏集中管理可能使審計變得困難。
- **缺乏加密**：秘密以明文形式存在時，無論在何處都容易遭受未經授權的訪問。
- **長壽命秘密的共享**：在多個系統中重複使用相同的秘密並允許它們長期存在，可能暴露關鍵漏洞。

### 減緩措施

- 根據風險評估和實施的易用性，選擇合適的系統保護措施，並持續評估和調整以應對新興威脅和技術進步。

### 使用秘密管理器或金鑰管理服務（KMS）

- 秘密管理和KMS確保秘密的集中和安全管理、訪問控制、輪替和審計能力。

### 集成

- 與開發環境有效集成秘密管理和KMS，增強安全性，確保在開發生命周期中適當處理敏感信息。

### 環境變量和配置文件

- 使用環境變量或配置文件是一種廣泛採用的方法，用於配置應用程序設置，而不需要直接將秘密嵌入到代碼庫中。

### CI/CD工具

- 大多数CI/CD工具提供了專門且安全的方法來管理構建和部署過程中所需的秘密。

### 確保訪問控制策略

- 確保應用程序安全訪問秘密並遵循訪問控制原則。

### 實施秘密輪替和更新機制

- 定期輪替秘密是減輕被泄露或洩露的憑據相關風險的關鍵。

### 靜態分析和代碼掃描

- 實施定期的靜態代碼分析和掃描，使用安全工具在開發過程中識別和標記硬編碼秘密。

### 無密碼身份驗證

- 利用雲主機提供商提供的無密碼選項，顯著減少直接存儲和管理秘密的需要。

### 單元測試

- 在常見的應用程序位置實施單元測試以掃描秘密，是一種主動措施。如果秘密意外提交到版本控制並推送，這些測試將在持續集成（CI）期間失敗，作為團隊的快速警報機制。

### 事例: MD5、SHA-1、SHA-2、SHA-3 、SHA都不要用太弱 不要用~

```
PASSWORD_HASHERS = (

 'django.contrib.auth.hashers.UnsaltedMD5PasswordHasher', 

)
```

在這行程式碼中，密碼雜湊演算法配置為無鹽 MD5 演算法。這是一種弱哈希演算法。如果攻擊者獲得了使用者密碼雜湊的存取權限，他們就可以輕鬆地從密碼雜湊中取得純文字。

### 事例:Argon2 或 PBKDF2 、AES比較有用~

```
SSWORD_HASHERS = (

 'django.contrib.auth.hashers.PBKDF2PasswordHasher', 

)
```

在此解決方案中，使用具有動態加鹽功能的強密碼雜湊演算法“PBKDF2PasswordHasher”。



